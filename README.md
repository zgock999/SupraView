# SupraView

SupraViewは、高度な画像表示機能と超解像処理機能を搭載した画像ビューアアプリケーションです。

## 機能概要

### 画像表示機能
- 様々な画像フォーマット対応（JPG, PNG, GIF, BMP等）
- デュアルビューモード（2画像の同時表示）
- ウィンドウに合わせた表示/原寸大表示の切り替え
- アーカイブ内の画像を閲覧（ZIP, RAR等）

### アーカイブ閲覧機能
- 様々なアーカイブ形式のサポート（ZIP, RAR等）
- アーカイブ内の階層構造表示
- ネスト化されたアーカイブ（アーカイブ内のアーカイブ）の自動認識・展開
- ファイルの抽出機能

### 超解像処理機能
- 機械学習（PyTorch）ベースの超解像処理
- 複数の超解像アルゴリズム対応
  - Real-ESRGAN
  - SwinIR（軽量モデル、実写向け、標準モデル、高品質モデル）
- 拡大倍率の調整（2倍、4倍等）
- タイル処理によるメモリ効率の最適化
- 処理設定のカスタマイズ（モデル選択、ノイズ除去強度等）

### プラグイン拡張機能
- プラグイン形式で書庫ハンドラを追加可能
- カスタム画像デコーダの実装と追加が容易
- 柔軟な拡張性により様々なフォーマットに対応

### その他の機能
- ファイルのドラッグ&ドロップ対応
- 16進数ダンプビュー（バイナリ表示）
- 画像サムネイル表示
- マルチスレッドによる処理の高速化

## 使用方法

### アプリケーションの起動
```
python -m app.viewer [画像/アーカイブファイルパス]
```
ファイルパスは省略可能です。指定した場合は、起動時に自動的にそのファイルが開かれます。

### 基本操作

1. **画像を開く**
   - コンテキストメニューメニューから「書庫を開く」または「フォルダを開く」を選択
   - 書庫ファイルまたはフォルダをウィンドウにドラッグ&ドロップ

2. **表示操作**
   - ウィンドウに合わせる/原寸大表示: 右クリックメニュー
   - デュアルビューモード切替: 右クリックメニュー

3. **画像プレビュー操作**
   - 画像移動: 矢印キー（右: 次の画像, 左: 前の画像）
   - 画像切り替え代替キー: N（次）, P（前）, Space（次）
   - フォルダ内移動: ↑（フォルダ先頭）, ↓（フォルダ末尾）
   - 全体移動: Home（全体先頭）, End（全体末尾）
   - フォルダ移動: Page Up（前のフォルダ）, Page Down（次のフォルダ）
   - フルスクリーン切替: F11 または F5
   - フルスクリーン終了: Esc
   - ウィンドウ終了: Q

4. **アーカイブ内の閲覧**
   - フォルダやアーカイブをダブルクリックして内容を表示
   - 「..」をクリックして親ディレクトリに移動
   - 画像ファイルをダブルクリックして表示

5. **超解像処理**
   - 画像表示中に右クリックメニューから「超解像処理」を選択
   - 設定メニューから超解像設定（モデル、倍率等）を調整
   - 処理中の状態はステータスバーに表示

6. **ファイル抽出**
   - アーカイブ内のファイルを右クリック → 「抽出...」を選択
   - 抽出先フォルダを指定して保存

### 超解像設定

1. 右クリックメニューまたはコンテキストメニューから「超解像設定...」を選択
2. 使用するモデル（Real-ESRGAN, SwinIR等）を選択
3. 拡大倍率を設定（モデルによって対応倍率は異なる）
4. 処理オプションを調整（タイルサイズ、ノイズ除去強度等）
5. 設定を保存して適用

## システム要件

- Python 3.11以上
- PySide6（Qt for Python）
- OpenCV
- PyTorch（GPU推奨）
- NumPy
- pillow
- rarfile
- RAR書庫と7z書庫のサポートには、UnRARと7zコマンドがパスの通った状態で実行可能であることが必要です

## ヒントとコツ

- GPU搭載のシステムでは超解像処理が高速に行われます
- 大きな画像の超解像処理は時間とメモリを消費します（タイルサイズで調整可能）
- タイルサイズを小さくすると少ないメモリで処理できますが速度が低下します
- アーカイブ内の画像は自動的にサムネイル表示されます